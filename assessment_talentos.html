<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assessment de Talentos - PEERS Consulting + Technology</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* PEERS Brand Colors */
        :root {
            --peers-blue: #011334;
            --peers-lime: #E1FF00;
            --peers-serene: #D8E8EE;
            --peers-white: #FFFFFF;
            --peers-gray: #F5F5F5;
            --peers-blue-02: #677185;
            --peers-blue-03: #99A1AE;
            --peers-blue-04: #CCD0D6;
            --peers-lime-02: #F3FF99;
            --peers-lime-03: #F9FFCC;
            --peers-serene-02: #E8F1F5;
            --peers-serene-03: #EFF6F8;
        }

        * {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #F8FAFB 0%, var(--peers-serene) 100%);
            min-height: 100vh;
        }

        /* PEERS Logo Styles */
        .peers-logo {
            font-weight: 800;
            letter-spacing: 0.05em;
            font-size: 2.5rem;
            color: var(--peers-blue);
            position: relative;
        }

        .peers-logo .letter-e {
            display: inline-block;
            position: relative;
            transform: scaleX(1.2);
            margin: 0 -2px;
        }

        .logo-plus {
            color: var(--peers-lime);
            font-size: 1.8rem;
            font-weight: 300;
            margin: 0 0.5rem;
        }

        .logo-tagline {
            font-size: 0.9rem;
            font-weight: 400;
            letter-spacing: 0.02em;
            color: var(--peers-blue);
            opacity: 0.8;
        }

        /* Header Gradient */
        .header-gradient {
            background: linear-gradient(135deg, var(--peers-blue) 0%, #023059 100%);
            position: relative;
            overflow: hidden;
        }

        .header-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            right: -20%;
            width: 60%;
            height: 100%;
            background: radial-gradient(circle, var(--peers-lime) 0%, transparent 70%);
            opacity: 0.05;
        }

        /* PEERS Custom Classes */
        .bg-peers-blue { background-color: var(--peers-blue); }
        .bg-peers-lime { background-color: var(--peers-lime); }
        .bg-peers-serene { background-color: var(--peers-serene); }
        .bg-peers-gray { background-color: var(--peers-gray); }
        .text-peers-blue { color: var(--peers-blue); }
        .text-peers-lime { color: var(--peers-lime); }
        .border-peers-blue { border-color: var(--peers-blue); }
        .border-peers-lime { border-color: var(--peers-lime); }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(135deg, var(--peers-blue) 0%, #023059 100%);
            color: white;
            padding: 0.875rem 2.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px rgba(1, 19, 52, 0.1);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(225, 255, 0, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(1, 19, 52, 0.2);
        }

        .btn-secondary {
            background-color: white;
            color: var(--peers-blue);
            padding: 0.875rem 2.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            border: 2px solid var(--peers-blue);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-secondary:hover {
            background-color: var(--peers-blue);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(1, 19, 52, 0.15);
        }

        /* Option Cards - IMPROVED */
        .option-card {
            background: white;
            border-radius: 1rem;
            padding: 1.25rem;
            border: 2px solid #E5E7EB;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transform: scale(1);
        }

        .option-card:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
            border-color: var(--peers-lime);
        }

        .option-card.selected {
            background: linear-gradient(135deg, var(--peers-serene) 0%, var(--peers-serene-02) 100%);
            border-color: var(--peers-blue);
            border-width: 2px;
            box-shadow: 0 0 0 4px rgba(1, 19, 52, 0.08);
            transform: scale(1);
        }

        .option-card.selected::after {
            content: '✓';
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--peers-lime);
            color: var(--peers-blue);
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            animation: checkIn 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes checkIn {
            0% {
                transform: scale(0) rotate(-45deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        /* Progress Bar */
        .progress-bar {
            height: 10px;
            background: linear-gradient(90deg, var(--peers-gray) 0%, #E5E7EB 100%);
            border-radius: 5px;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.06);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--peers-blue) 0%, var(--peers-lime) 100%);
            border-radius: 5px;
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Thermometer */
        .thermometer-gradient {
            background: linear-gradient(90deg, 
                #EF4444 0%, 
                #F59E0B 25%, 
                #FDE047 50%, 
                #84CC16 75%, 
                #22C55E 100%);
            position: relative;
        }

        .thermometer-gradient::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, 
                rgba(255, 255, 255, 0.2) 0%, 
                transparent 50%, 
                rgba(0, 0, 0, 0.1) 100%);
            border-radius: 9999px;
        }

        .score-indicator {
            transition: left 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
        }

        /* Level Indicator */
        .level-indicator {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-weight: 700;
            font-size: 1.125rem;
            flex-shrink: 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .level-1 { 
            background: linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%); 
            color: #DC2626;
        }
        .level-2 { 
            background: linear-gradient(135deg, #FEF3C7 0%, #FDE68A 100%); 
            color: #D97706;
        }
        .level-3 { 
            background: linear-gradient(135deg, #FEF9C3 0%, #FDE047 100%); 
            color: #CA8A04;
        }
        .level-4 { 
            background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%); 
            color: #059669;
        }

        /* Dimension Card */
        .dimension-card {
            background: white;
            border-radius: 1.25rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.04), 0 10px 15px rgba(0, 0, 0, 0.03);
            border-left: 5px solid var(--peers-blue);
            position: relative;
            overflow: hidden;
        }

        @media (min-width: 640px) {
            .dimension-card {
                padding: 2rem;
            }
        }

        @media (min-width: 768px) {
            .dimension-card {
                padding: 2.5rem;
            }
        }

        .dimension-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: var(--peers-lime);
            opacity: 0.05;
            border-radius: 50%;
            transform: translate(30px, -30px);
        }

        /* Question Container */
        .question-container {
            transition: all 0.3s ease;
            position: relative;
        }

        .question-container.answered::before {
            content: '✓';
            position: absolute;
            left: -40px;
            top: 10px;
            width: 24px;
            height: 24px;
            background: var(--peers-lime);
            color: var(--peers-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
        }

        /* Animation */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-in-right {
            animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Loading spinner */
        .spinner {
            border: 3px solid var(--peers-gray);
            border-top: 3px solid var(--peers-blue);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white;
            }
            
            .page-break {
                page-break-after: always;
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .peers-logo {
                font-size: 1.75rem;
            }

            .logo-tagline {
                font-size: 0.75rem;
            }

            .option-card {
                padding: 0.875rem;
            }

            .level-indicator {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }

            .question-container.answered::before {
                left: -30px;
                width: 20px;
                height: 20px;
                font-size: 0.75rem;
            }

            /* Adjust canvas container for mobile */
            #radarChart {
                max-height: 280px !important;
            }

            /* Better touch targets for mobile */
            .option-card {
                min-height: 80px;
            }

            button {
                min-height: 44px;
            }

            /* Adjust font sizes for better readability */
            .text-lg {
                font-size: 1rem;
            }

            .text-xl {
                font-size: 1.125rem;
            }

            .text-2xl {
                font-size: 1.25rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }

            .dimension-card {
                border-left-width: 3px;
                padding: 1rem;
            }

            /* Stack navigation buttons on very small screens */
            #questionsSection .flex-col.sm\:flex-row {
                gap: 0.5rem;
            }

            /* Adjust button text size on very small screens */
            button {
                font-size: 0.875rem;
            }

            /* Adjust option cards on very small screens */
            .option-card {
                padding: 0.75rem;
            }

            /* Hide some text on very small screens for better fit */
            .text-xs {
                font-size: 0.625rem;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--peers-gray);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--peers-blue);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--peers-blue-02);
        }
    </style>
</head>
<body>
    <!-- Header -->
 <!-- Header -->
    <header class="bg-peers-blue text-white py-4 md:py-6 px-4 md:px-8 shadow-lg">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-3">
            <img src="https://d3fh32tca5cd7q.cloudfront.net/wp-content/uploads/2025/03/logo.svg" 
                alt="PEERS" 
                class="h-8 md:h-10 w-auto">
            <div class="text-xs md:text-sm text-center">
                <span class="text-peers-lime">Assessment</span> | Talentos
            </div>
        </div>
    </header>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8 max-w-7xl">
        <!-- Main Title -->
        <div class="text-center mb-8 sm:mb-12 fade-in-up">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-peers-blue mb-3 sm:mb-4 px-2">
                Assessment de Talentos
            </h1>
            <p class="text-base sm:text-lg md:text-xl text-gray-600 max-w-3xl mx-auto px-4">
                Avaliação completa da maturidade em gestão de pessoas e desenvolvimento organizacional
            </p>
        </div>

        <!-- Progress Header (Hidden initially) -->
        <div id="progressHeader" class="hidden bg-white rounded-2xl shadow-lg p-4 sm:p-6 mb-6 sm:mb-8 fade-in-up">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-3 sm:mb-4 gap-2">
                <h3 class="text-base sm:text-lg font-semibold text-peers-blue">Progresso da Avaliação</h3>
                <span id="progressText" class="text-xs sm:text-sm text-gray-600">0 de 27 questões respondidas</span>
            </div>
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
            </div>
            <div class="flex justify-between mt-2 text-[10px] sm:text-xs text-gray-500">
                <span>Início</span>
                <span id="progressPercentage" class="font-bold text-peers-blue text-xs sm:text-sm">0%</span>
                <span>Conclusão</span>
            </div>
        </div>

        <!-- Welcome Section -->
        <div id="welcomeSection" class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 mb-8 fade-in-up">
            <h3 class="text-xl sm:text-2xl font-bold text-peers-blue mb-4 sm:mb-6">
                Bem-vindo ao Assessment de Talentos PEERS
            </h3>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-6 sm:mb-8">
                <div>
                    <h4 class="text-base sm:text-lg font-semibold text-peers-blue mb-3 sm:mb-4 flex items-center">
                        <span class="text-xl sm:text-2xl mr-2">📊</span> O que será avaliado:
                    </h4>
                    <ul class="space-y-2 sm:space-y-3 text-sm sm:text-base text-gray-700">
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-peers-lime rounded-full mt-1.5 sm:mt-2 mr-3 flex-shrink-0"></span>
                            <span><strong>Strategy:</strong> Alinhamento e estratégia</span>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-peers-lime rounded-full mt-1.5 sm:mt-2 mr-3 flex-shrink-0"></span>
                            <span><strong>Shape:</strong> Estrutura organizacional</span>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-peers-lime rounded-full mt-1.5 sm:mt-2 mr-3 flex-shrink-0"></span>
                            <span><strong>Shift:</strong> Transformação e mudança</span>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-peers-lime rounded-full mt-1.5 sm:mt-2 mr-3 flex-shrink-0"></span>
                            <span><strong>Talent:</strong> Gestão de talentos</span>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-peers-lime rounded-full mt-1.5 sm:mt-2 mr-3 flex-shrink-0"></span>
                            <span><strong>Tech & Digital:</strong> Transformação digital</span>
                        </li>
                        <li class="flex items-start">
                            <span class="inline-block w-2 h-2 bg-peers-lime rounded-full mt-1.5 sm:mt-2 mr-3 flex-shrink-0"></span>
                            <span><strong>Work Environment:</strong> Experiência</span>
                        </li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-base sm:text-lg font-semibold text-peers-blue mb-3 sm:mb-4 flex items-center">
                        <span class="text-xl sm:text-2xl mr-2">⏱️</span> Informações importantes:
                    </h4>
                    <ul class="space-y-2 text-sm sm:text-base text-gray-700">
                        <li class="flex items-center">
                            <span class="text-peers-lime mr-2">▸</span>
                            Tempo estimado: <strong class="ml-1">5-10 minutos</strong>
                        </li>
                        <li class="flex items-center">
                            <span class="text-peers-lime mr-2">▸</span>
                            Total de questões: <strong class="ml-1">27</strong> (demonstrativo)
                        </li>
                        <li class="flex items-center">
                            <span class="text-peers-lime mr-2">▸</span>
                            Respostas salvas automaticamente
                        </li>
                        <li class="flex items-center">
                            <span class="text-peers-lime mr-2">▸</span>
                            Relatório personalizado ao final
                        </li>
                        <li class="flex items-center">
                            <span class="text-peers-lime mr-2">▸</span>
                            100% confidencial
                        </li>
                    </ul>
                    
                    <div class="bg-gradient-to-r from-peers-serene to-peers-serene-02 rounded-xl p-3 sm:p-4 mt-3 sm:mt-4">
                        <p class="text-xs sm:text-sm text-peers-blue">
                            <strong>💡 Dica:</strong> Responda com base na realidade atual da sua organização, 
                            não no estado desejado. Isso garantirá um diagnóstico mais preciso.
                        </p>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-4 sm:p-6 mb-6">
                <h4 class="text-base sm:text-lg font-semibold text-peers-blue mb-3 sm:mb-4">📋 Escala de Avaliação</h4>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4">
                    <div class="text-center bg-white rounded-lg p-3 sm:p-4 hover:shadow-lg transition-shadow">
                        <div class="level-indicator level-1 mx-auto mb-2">1</div>
                        <p class="font-semibold text-xs sm:text-sm">Não existe</p>
                        <p class="text-[10px] sm:text-xs text-gray-600 mt-1">Processo inexistente</p>
                    </div>
                    <div class="text-center bg-white rounded-lg p-3 sm:p-4 hover:shadow-lg transition-shadow">
                        <div class="level-indicator level-2 mx-auto mb-2">2</div>
                        <p class="font-semibold text-xs sm:text-sm">Em construção</p>
                        <p class="text-[10px] sm:text-xs text-gray-600 mt-1">Início da formalização</p>
                    </div>
                    <div class="text-center bg-white rounded-lg p-3 sm:p-4 hover:shadow-lg transition-shadow">
                        <div class="level-indicator level-3 mx-auto mb-2">3</div>
                        <p class="font-semibold text-xs sm:text-sm">Implementado</p>
                        <p class="text-[10px] sm:text-xs text-gray-600 mt-1">Aplicação regular</p>
                    </div>
                    <div class="text-center bg-white rounded-lg p-3 sm:p-4 hover:shadow-lg transition-shadow">
                        <div class="level-indicator level-4 mx-auto mb-2">4</div>
                        <p class="font-semibold text-xs sm:text-sm">Maturidade avançada</p>
                        <p class="text-[10px] sm:text-xs text-gray-600 mt-1">Otimização contínua</p>
                    </div>
                </div>
            </div>

            <form id="startForm" class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                            Tipo de Indústria *
                        </label>
                        <select id="industryType" required class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                            <option value="">Selecione...</option>
                            <option value="tech">Tecnologia e Software</option>
                            <option value="financial">Serviços Financeiros</option>
                            <option value="retail">Varejo e E-commerce</option>
                            <option value="manufacturing">Indústria e Manufatura</option>
                            <option value="healthcare">Saúde e Farmacêutica</option>
                            <option value="education">Educação</option>
                            <option value="services">Serviços Profissionais</option>
                            <option value="agro">Agronegócio</option>
                            <option value="logistics">Logística e Transportes</option>
                            <option value="energy">Energia e Utilidades</option>
                            <option value="construction">Construção Civil</option>
                            <option value="other">Outro</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                            Número de Funcionários *
                        </label>
                        <select id="companySize" required class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                            <option value="">Selecione...</option>
                            <option value="1-50">1-50</option>
                            <option value="51-200">51-200</option>
                            <option value="201-500">201-500</option>
                            <option value="501-1000">501-1.000</option>
                            <option value="1001-5000">1.001-5.000</option>
                            <option value="5001+">Mais de 5.000</option>
                        </select>
                    </div>
                </div>
                
                <button type="submit" class="w-full btn-primary py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg">
                    Iniciar Assessment →
                </button>
            </form>
        </div>

        <!-- Questions Section (Hidden initially) -->
        <div id="questionsSection" class="hidden">
            <div id="questionsContainer"></div>
            
            <!-- Navigation -->
            <div class="flex flex-col sm:flex-row justify-between items-center gap-3 sm:gap-4 mt-8 no-print bg-white rounded-xl p-4 sm:p-6 shadow-lg">
                <button id="prevBtn" onclick="navigateBloco(-1)" class="btn-secondary w-full sm:w-auto opacity-50 cursor-not-allowed" disabled>
                    ← Bloco Anterior
                </button>
                <div class="text-center order-first sm:order-none mb-2 sm:mb-0">
                    <p class="text-xs sm:text-sm text-gray-600">Navegação</p>
                    <p class="text-base sm:text-lg font-bold text-peers-blue" id="currentBlockInfo">Bloco 1 de 6</p>
                </div>
                <button id="nextBtn" onclick="navigateBloco(1)" class="btn-primary w-full sm:w-auto">
                    Próximo Bloco →
                </button>
                <button id="finishBtn" onclick="finishAssessment()" class="btn-primary bg-gradient-to-r from-green-600 to-green-500 w-full sm:w-auto hidden">
                    Concluir Assessment ✓
                </button>
            </div>
        </div>

        <!-- Data Capture Section (Hidden initially) -->
        <div id="dataCaptureSection" class="hidden bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 mb-8 fade-in-up">
            <h3 class="text-xl sm:text-2xl font-bold text-peers-blue mb-4 sm:mb-6">
                Quase lá! Precisamos de algumas informações
            </h3>
            <p class="text-sm sm:text-base text-gray-600 mb-4 sm:mb-6">
                Para gerar seu relatório personalizado, por favor preencha os dados abaixo:
            </p>
            
            <form id="dataForm" class="space-y-4">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                            Nome Completo *
                        </label>
                        <input type="text" id="userName" required 
                               class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                            Cargo *
                        </label>
                        <input type="text" id="userPosition" required 
                               class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                    </div>
                </div>
                
                <div>
                    <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                        Empresa *
                    </label>
                    <input type="text" id="userCompany" required 
                           class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                            E-mail Corporativo *
                        </label>
                        <input type="email" id="userEmail" required 
                               class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                    </div>
                    
                    <div>
                        <label class="block text-xs sm:text-sm font-medium text-gray-700 mb-1 sm:mb-2">
                            WhatsApp (Opcional)
                        </label>
                        <input type="tel" id="userWhatsapp" placeholder="(11) 99999-9999" 
                               class="w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-peers-blue focus:border-transparent transition-all">
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-peers-serene to-peers-serene-02 rounded-xl p-3 sm:p-4">
                    <label class="flex items-start cursor-pointer">
                        <input type="checkbox" required class="mt-0.5 sm:mt-1 mr-2 sm:mr-3">
                        <span class="text-xs sm:text-sm text-gray-700">
                            Concordo em compartilhar essas informações com a PEERS para receber o relatório 
                            personalizado e possíveis contatos sobre melhorias em gestão de talentos.
                        </span>
                    </label>
                </div>
                
                <button type="submit" class="w-full btn-primary py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg">
                    Gerar Relatório Personalizado →
                </button>
            </form>
        </div>

        <!-- Report Section (Hidden initially) -->
        <div id="reportSection" class="hidden">
            <!-- Overall Score -->
            <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 mb-8 fade-in-up">
                <h2 class="text-2xl sm:text-3xl font-bold text-peers-blue mb-6 sm:mb-8 text-center">
                    Relatório de Maturidade em Gestão de Talentos
                </h2>
                
                <div class="flex flex-col lg:grid lg:grid-cols-2 gap-6 sm:gap-8 mb-8 items-center">
                    <div class="w-full text-center order-1">
                        <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-4 sm:p-6 md:p-8">
                            <h3 class="text-lg sm:text-xl font-semibold text-peers-blue mb-4">Pontuação Geral</h3>
                            <div id="overallScore" class="text-5xl sm:text-6xl font-bold text-peers-blue mb-2"></div>
                            <div id="overallLevel" class="text-sm sm:text-lg text-gray-600 px-2"></div>
                            
                            <!-- Thermometer -->
                            <div class="mt-6 px-2 sm:px-4">
                                <div class="relative">
                                    <div class="relative w-full h-10 sm:h-14 thermometer-gradient rounded-full shadow-inner overflow-hidden">
                                        <div id="scoreIndicator" class="absolute top-1/2 transform -translate-y-1/2 score-indicator" style="left: 0%">
                                            <div class="w-6 h-14 sm:w-8 sm:h-20 bg-white rounded-full border-2 sm:border-4 border-peers-blue shadow-xl flex items-center justify-center">
                                                <span id="indicatorValue" class="text-[10px] sm:text-xs font-bold text-peers-blue"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-4">
                                        <div class="text-center flex-1">
                                            <span class="block text-sm sm:text-lg font-bold">1</span>
                                            <span class="text-[10px] sm:text-xs text-gray-500 hidden sm:block">Não existe</span>
                                        </div>
                                        <div class="text-center flex-1">
                                            <span class="block text-sm sm:text-lg font-bold">2</span>
                                            <span class="text-[10px] sm:text-xs text-gray-500 hidden sm:block">Em construção</span>
                                        </div>
                                        <div class="text-center flex-1">
                                            <span class="block text-sm sm:text-lg font-bold">3</span>
                                            <span class="text-[10px] sm:text-xs text-gray-500 hidden sm:block">Implementado</span>
                                        </div>
                                        <div class="text-center flex-1">
                                            <span class="block text-sm sm:text-lg font-bold">4</span>
                                            <span class="text-[10px] sm:text-xs text-gray-500 hidden sm:block">Maturidade</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="w-full order-2 px-4 sm:px-0" style="min-height: 300px;">
                        <div class="relative" style="height: 300px; max-width: 100%;">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Analysis -->
            <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 mb-8 fade-in-up">
                <h3 class="text-xl sm:text-2xl font-bold text-peers-blue mb-4 sm:mb-6">Análise Detalhada por Dimensão</h3>
                <div id="detailedAnalysis"></div>
            </div>

            <!-- Recommendations -->
            <div class="bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 mb-8 fade-in-up">
                <h3 class="text-xl sm:text-2xl font-bold text-peers-blue mb-4 sm:mb-6">Plano de Ação Prioritizado</h3>
                <p class="text-sm sm:text-base text-gray-600 mb-4 sm:mb-6">
                    Com base em sua avaliação, estas são as ações recomendadas para evolução da maturidade 
                    em gestão de talentos:
                </p>
                <div id="recommendationsContainer"></div>
            </div>

            <!-- Next Steps -->
            <div class="bg-gradient-to-br from-peers-blue via-peers-blue to-[#023059] rounded-2xl shadow-xl p-4 sm:p-6 md:p-8 text-white text-center relative overflow-hidden">
                <div class="absolute top-0 right-0 w-32 h-32 sm:w-64 sm:h-64 bg-peers-lime opacity-10 rounded-full transform translate-x-16 -translate-y-16 sm:translate-x-32 sm:-translate-y-32"></div>
                <div class="relative z-10">
                    <h3 class="text-xl sm:text-2xl font-bold mb-3 sm:mb-4">Próximos Passos</h3>
                    <p class="text-sm sm:text-lg mb-4 sm:mb-6 opacity-90 px-2">
                        A PEERS está pronta para apoiar sua empresa na jornada de transformação
                    </p>
                    <div class="flex flex-col gap-3 sm:flex-row sm:gap-4 justify-center px-2">
                        <button onclick="window.print()" class="btn-secondary py-2 px-4 sm:py-3 sm:px-8 rounded-xl text-sm sm:text-base">
                            <!-- 📄 Imprimir
                        </button>
                        <button onclick="downloadReport()" class="bg-peers-lime text-peers-blue py-2 px-4 sm:py-3 sm:px-8 rounded-xl font-semibold hover:transform hover:scale-105 transition-all text-sm sm:text-base">
                            📊 Dashboard
                        </button> -->
                        <a href="https://peers.com.br/contato" target="_blank" 
                           class="bg-white text-peers-blue py-2 px-4 sm:py-3 sm:px-8 rounded-xl font-semibold hover:transform hover:scale-105 transition-all inline-block text-sm sm:text-base">
                            💬 Especialista
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Assessment Data Structure (from Excel)
        const assessmentData = {
            blocos: {
                "Strategy": {
                    divisions: ["Business Aligment", "People Strategy", "Leadership", "Sucession Planning"],
                    questions: [
                        {
                            id: "0001",
                            division: "Business Aligment",
                            text: "Nossa estratégia de pessoas está claramente conectada à estratégia de negócio?",
                            levels: {
                                1: "Não há conexão formal entre estratégia de pessoas e negócio",
                                2: "Conexão existe mas é informal ou parcial",
                                3: "Estratégias alinhadas com métricas claras",
                                4: "Integração completa com revisão contínua e ajustes baseados em dados"
                            }
                        },
                        {
                            id: "0002",
                            division: "Business Aligment",
                            text: "Utilizamos métricas claras que mostram o impacto das pessoas nos resultados de negócio?",
                            levels: {
                                1: "Não temos métricas de impacto definidas",
                                2: "Métricas básicas sem conexão clara com resultados",
                                3: "KPIs definidos e monitorados regularmente",
                                4: "Sistema integrado de analytics com insights preditivos"
                            }
                        },
                        {
                            id: "0003",
                            division: "Business Aligment",
                            text: "Os executivos comunicam regularmente como a estratégia de pessoas suporta os objetivos organizacionais?",
                            levels: {
                                1: "Comunicação inexistente ou esporádica",
                                2: "Comunicação ocasional sem estrutura formal",
                                3: "Comunicação regular e estruturada",
                                4: "Comunicação estratégica multicanal com feedback contínuo"
                            }
                        },
                        {
                            id: "0004",
                            division: "Business Aligment",
                            text: "Existe um processo formal para revisar e ajustar o alinhamento estratégico anualmente?",
                            levels: {
                                1: "Não há processo de revisão formal",
                                2: "Revisões ad hoc sem metodologia clara",
                                3: "Processo anual estruturado de revisão",
                                4: "Ciclo contínuo de revisão com ajustes ágeis"
                            }
                        },
                        {
                            id: "0005",
                            division: "Business Aligment",
                            text: "Os líderes de negócio participam ativamente da definição da estratégia de pessoas?",
                            levels: {
                                1: "Líderes não participam da estratégia de pessoas",
                                2: "Participação limitada ou consultiva",
                                3: "Participação ativa e colaborativa",
                                4: "Co-criação e ownership compartilhado"
                            }
                        }
                    ]
                },
                "Shape": {
                    divisions: ["Organizational Design", "Workforce Planning", "Skills & Capabilities"],
                    questions: [
                        {
                            id: "0011",
                            division: "Organizational Design",
                            text: "Nossa estrutura organizacional suporta agilidade e colaboração efetiva?",
                            levels: {
                                1: "Estrutura rígida e hierárquica",
                                2: "Alguns elementos de flexibilidade",
                                3: "Estrutura adaptável com times multifuncionais",
                                4: "Organização ágil e auto-organizável"
                            }
                        },
                        {
                            id: "0012",
                            division: "Workforce Planning",
                            text: "Realizamos planejamento estratégico de força de trabalho conectado ao negócio?",
                            levels: {
                                1: "Não há planejamento formal de workforce",
                                2: "Planejamento básico e reativo",
                                3: "Planejamento estruturado e proativo",
                                4: "Workforce analytics com modelagem preditiva"
                            }
                        },
                        {
                            id: "0013",
                            division: "Skills & Capabilities",
                            text: "Mapeamos e desenvolvemos sistematicamente as competências críticas?",
                            levels: {
                                1: "Não há mapeamento de competências",
                                2: "Mapeamento parcial sem plano de desenvolvimento",
                                3: "Sistema completo de gestão de competências",
                                4: "Plataforma integrada de skills com IA"
                            }
                        }
                    ]
                },
                "Shift": {
                    divisions: ["Change Management", "Culture Transformation", "Communication"],
                    questions: [
                        {
                            id: "0014",
                            division: "Change Management",
                            text: "Possuímos metodologia estruturada de gestão de mudanças?",
                            levels: {
                                1: "Não há processo formal de gestão de mudanças",
                                2: "Abordagem ad hoc para mudanças",
                                3: "Metodologia estruturada e aplicada consistentemente",
                                4: "Centro de excelência em mudanças com melhores práticas"
                            }
                        },
                        {
                            id: "0015",
                            division: "Culture Transformation",
                            text: "Medimos e gerenciamos ativamente a cultura organizacional?",
                            levels: {
                                1: "Cultura não é medida ou gerenciada formalmente",
                                2: "Medições ocasionais sem ações estruturadas",
                                3: "Diagnóstico regular com planos de ação",
                                4: "Gestão contínua de cultura com analytics avançados"
                            }
                        },
                        {
                            id: "0016",
                            division: "Communication",
                            text: "Nossa comunicação interna é efetiva e engajadora?",
                            levels: {
                                1: "Comunicação limitada e unidirecional",
                                2: "Comunicação regular mas com baixo engajamento",
                                3: "Estratégia multicanal com boa participação",
                                4: "Comunicação personalizada com alto engajamento"
                            }
                        }
                    ]
                },
                "Talent": {
                    divisions: ["Talent Acquisition", "Performance Management", "Learning & Development", "Retention"],
                    questions: [
                        {
                            id: "0017",
                            division: "Talent Acquisition",
                            text: "Nosso processo de atração de talentos é estratégico e eficiente?",
                            levels: {
                                1: "Processo reativo e não estruturado",
                                2: "Processo básico com algumas melhorias",
                                3: "Processo otimizado com métricas claras",
                                4: "Talent acquisition como vantagem competitiva"
                            }
                        },
                        {
                            id: "0018",
                            division: "Performance Management",
                            text: "Nosso sistema de gestão de performance promove desenvolvimento contínuo?",
                            levels: {
                                1: "Avaliação anual tradicional apenas",
                                2: "Sistema em transição para feedback contínuo",
                                3: "Feedback contínuo com foco em desenvolvimento",
                                4: "Performance management ágil e personalizado"
                            }
                        },
                        {
                            id: "0019",
                            division: "Learning & Development",
                            text: "Oferecemos oportunidades de aprendizagem relevantes e personalizadas?",
                            levels: {
                                1: "Treinamentos genéricos e esporádicos",
                                2: "Catálogo básico de treinamentos",
                                3: "Trilhas de aprendizagem estruturadas",
                                4: "Ecossistema de aprendizagem com IA"
                            }
                        },
                        {
                            id: "0020",
                            division: "Retention",
                            text: "Temos estratégias efetivas de retenção de talentos críticos?",
                            levels: {
                                1: "Não há estratégia formal de retenção",
                                2: "Ações pontuais de retenção",
                                3: "Programa estruturado de retenção",
                                4: "Gestão preditiva de retenção com analytics"
                            }
                        }
                    ]
                },
                "Tech & Digital": {
                    divisions: ["HR Technology", "Data & Analytics", "Digital Employee Experience"],
                    questions: [
                        {
                            id: "0021",
                            division: "HR Technology",
                            text: "Nossa tecnologia de RH está integrada e otimizada?",
                            levels: {
                                1: "Sistemas isolados e manuais",
                                2: "Alguma automação mas ainda fragmentada",
                                3: "Suite integrada de RH",
                                4: "Plataforma digital end-to-end com IA"
                            }
                        },
                        {
                            id: "0022",
                            division: "Data & Analytics",
                            text: "Utilizamos people analytics para tomada de decisão?",
                            levels: {
                                1: "Não utilizamos analytics de pessoas",
                                2: "Reports básicos e descritivos",
                                3: "Analytics com insights acionáveis",
                                4: "Analytics preditivo e prescritivo"
                            }
                        },
                        {
                            id: "0023",
                            division: "Digital Employee Experience",
                            text: "Oferecemos experiência digital seamless aos colaboradores?",
                            levels: {
                                1: "Experiência fragmentada e manual",
                                2: "Alguns processos digitalizados",
                                3: "Jornada digital integrada",
                                4: "Experiência personalizada com IA"
                            }
                        }
                    ]
                },
                "Work Environment": {
                    divisions: ["Employee Experience", "Well-being", "Diversity & Inclusion", "Recognition"],
                    questions: [
                        {
                            id: "0024",
                            division: "Employee Experience",
                            text: "Medimos e gerenciamos sistematicamente a experiência do colaborador?",
                            levels: {
                                1: "Não medimos experiência do colaborador",
                                2: "Pesquisas ocasionais sem ação estruturada",
                                3: "Programa regular de employee experience",
                                4: "Gestão contínua com real-time feedback"
                            }
                        },
                        {
                            id: "0025",
                            division: "Well-being",
                            text: "Temos programas abrangentes de bem-estar e saúde mental?",
                            levels: {
                                1: "Não há programas estruturados",
                                2: "Iniciativas básicas de bem-estar",
                                3: "Programa completo de well-being",
                                4: "Ecossistema holístico de saúde integral"
                            }
                        },
                        {
                            id: "0026",
                            division: "Diversity & Inclusion",
                            text: "Nossa cultura promove genuinamente diversidade e inclusão?",
                            levels: {
                                1: "Não há iniciativas formais de D&I",
                                2: "Iniciativas iniciais sem métricas claras",
                                3: "Programa estruturado com metas e ações",
                                4: "D&I como diferencial competitivo comprovado"
                            }
                        },
                        {
                            id: "0027",
                            division: "Recognition",
                            text: "Temos cultura forte de reconhecimento e valorização?",
                            levels: {
                                1: "Reconhecimento informal e esporádico",
                                2: "Programa básico de reconhecimento",
                                3: "Sistema integrado de reconhecimento",
                                4: "Cultura de reconhecimento peer-to-peer"
                            }
                        }
                    ]
                }
            }
        };

        // Global variables
        let currentBlocoIndex = 0;
        let responses = {};
        let blocoKeys = Object.keys(assessmentData.blocos);
        let totalQuestions = 27; // Demo version
        let answeredQuestions = 0;
        let userData = {};
        let industryType = '';
        let companySize = '';

        // Initialize
        function initializeAssessment() {
            updateProgress();
        }

        // Start Assessment
        function startAssessment() {
            const industry = document.getElementById('industryType').value;
            const size = document.getElementById('companySize').value;
            
            if (!industry || !size) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            industryType = industry;
            companySize = size;
            
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('progressHeader').classList.remove('hidden');
            document.getElementById('questionsSection').classList.remove('hidden');
            
            renderBloco(currentBlocoIndex);
            updateProgress();
        }

        // Render Questions for Current Bloco - IMPROVED VERSION
        function renderBloco(index) {
            const container = document.getElementById('questionsContainer');
            const blocoName = blocoKeys[index];
            const bloco = assessmentData.blocos[blocoName];
            
            // Clear container with fade effect
            container.style.opacity = '0';
            
            setTimeout(() => {
                container.innerHTML = '';
                
                // Create bloco container
                const blocoDiv = document.createElement('div');
                blocoDiv.className = 'dimension-card';
                
                // Bloco header
                blocoDiv.innerHTML = `
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-2xl font-bold text-peers-blue">${blocoName}</h3>
                            <span class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                                Bloco ${index + 1} de 6
                            </span>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${bloco.divisions.map(div => `
                                <span class="px-3 py-1 bg-gradient-to-r from-peers-serene to-peers-serene-02 text-peers-blue rounded-full text-sm font-medium">
                                    ${div}
                                </span>
                            `).join('')}
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3 shadow-inner">
                            <div class="bg-gradient-to-r from-peers-blue to-peers-lime h-3 rounded-full transition-all duration-500" 
                                 style="width: ${(getBlockAnsweredQuestions(blocoName) / bloco.questions.length) * 100}%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">
                            ${getBlockAnsweredQuestions(blocoName)} de ${bloco.questions.length} questões respondidas
                        </p>
                    </div>
                `;
                
                // Questions
                bloco.questions.forEach((question, qIndex) => {
                    const isAnswered = responses[question.id] !== undefined;
                    const questionDiv = document.createElement('div');
                    questionDiv.className = `question-container mb-8 pb-8 border-b border-gray-200 last:border-0 ${isAnswered ? 'answered' : ''}`;
                    questionDiv.setAttribute('data-question-id', question.id);
                    
                    questionDiv.innerHTML = `
                        <div class="mb-4">
                            <div class="flex items-start gap-3">
                                <span class="inline-flex items-center justify-center w-10 h-10 bg-gradient-to-r from-peers-blue to-[#023059] text-white rounded-full text-sm font-bold flex-shrink-0">
                                    ${qIndex + 1}
                                </span>
                                <div class="flex-1">
                                    <p class="text-lg font-medium text-gray-800 mb-2">${question.text}</p>
                                    <span class="text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full">
                                        ${question.division} | ID: ${question.id}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-4 ml-0 sm:ml-12" id="options-${question.id}">
                            ${renderOptions(question)}
                        </div>
                    `;
                    
                    blocoDiv.appendChild(questionDiv);
                });
                
                container.appendChild(blocoDiv);
                
                // Fade in
                setTimeout(() => {
                    container.style.opacity = '1';
                    container.style.transition = 'opacity 0.5s ease';
                }, 50);
                
            }, 300);
            
            updateNavigationButtons();
            updateProgress();
        }

        // Render Options for a Question
        function renderOptions(question) {
            let html = '';
            for (let level = 1; level <= 4; level++) {
                const isSelected = responses[question.id] === level;
                html += `
                    <div class="option-card ${isSelected ? 'selected' : ''}" 
                         onclick="selectOption('${question.id}', ${level})"
                         data-level="${level}">
                        <div class="flex items-start gap-3">
                            <div class="level-indicator level-${level}">${level}</div>
                            <div class="flex-1">
                                <p class="font-semibold text-sm mb-1">
                                    ${level === 1 ? 'Não existe' : 
                                      level === 2 ? 'Em construção' : 
                                      level === 3 ? 'Implementado' : 
                                      'Maturidade avançada'}
                                </p>
                                <p class="text-xs text-gray-600">${question.levels[level]}</p>
                            </div>
                        </div>
                    </div>
                `;
            }
            return html;
        }

        // Select Option - IMPROVED to avoid full re-render
        function selectOption(questionId, level) {
            const wasAnswered = responses[questionId] !== undefined;
            const previousLevel = responses[questionId];
            responses[questionId] = level;
            
            if (!wasAnswered) {
                answeredQuestions++;
            }
            
            // Update only the affected question UI
            const optionsContainer = document.getElementById(`options-${questionId}`);
            const options = optionsContainer.querySelectorAll('.option-card');
            
            // Remove selected class from all options
            options.forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to the chosen option
            options.forEach(option => {
                if (parseInt(option.getAttribute('data-level')) === level) {
                    option.classList.add('selected');
                }
            });
            
            // Mark question as answered
            const questionContainer = document.querySelector(`[data-question-id="${questionId}"]`);
            if (!wasAnswered) {
                questionContainer.classList.add('answered');
            }
            
            // Update progress
            updateProgress();
            updateBlockProgress();
        }

        // Update Block Progress
        function updateBlockProgress() {
            const blocoName = blocoKeys[currentBlocoIndex];
            const bloco = assessmentData.blocos[blocoName];
            const answered = getBlockAnsweredQuestions(blocoName);
            const percentage = (answered / bloco.questions.length) * 100;
            
            // Find and update the progress bar for current block
            const progressBar = document.querySelector('.dimension-card .bg-gradient-to-r.from-peers-blue');
            if (progressBar) {
                progressBar.style.width = percentage + '%';
            }
            
            // Update count text
            const countText = document.querySelector('.dimension-card .text-gray-600');
            if (countText) {
                countText.textContent = `${answered} de ${bloco.questions.length} questões respondidas`;
            }
        }

        // Get number of answered questions in a block
        function getBlockAnsweredQuestions(blocoName) {
            const bloco = assessmentData.blocos[blocoName];
            return bloco.questions.filter(q => responses[q.id] !== undefined).length;
        }

        // Navigate between blocos
        function navigateBloco(direction) {
            const newIndex = currentBlocoIndex + direction;
            
            if (newIndex >= 0 && newIndex < blocoKeys.length) {
                currentBlocoIndex = newIndex;
                renderBloco(currentBlocoIndex);
                window.scrollTo({ top: 200, behavior: 'smooth' });
            }
        }

        // Update Navigation Buttons
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const finishBtn = document.getElementById('finishBtn');
            const blockInfo = document.getElementById('currentBlockInfo');
            
            // Update block info
            blockInfo.textContent = `Bloco ${currentBlocoIndex + 1} de 6`;
            
            // Previous button
            if (currentBlocoIndex === 0) {
                prevBtn.disabled = true;
                prevBtn.classList.add('opacity-50', 'cursor-not-allowed');
            } else {
                prevBtn.disabled = false;
                prevBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
            
            // Next/Finish buttons
            if (currentBlocoIndex === blocoKeys.length - 1) {
                nextBtn.classList.add('hidden');
                finishBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                finishBtn.classList.add('hidden');
            }
        }

        // Update Progress
        function updateProgress() {
            const percentage = (answeredQuestions / totalQuestions) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = 
                `${answeredQuestions} de ${totalQuestions} questões respondidas`;
            document.getElementById('progressPercentage').textContent = 
                Math.round(percentage) + '%';
        }

        // Finish Assessment
        function finishAssessment() {
            if (answeredQuestions < totalQuestions * 0.7) {
                if (!confirm(`Você respondeu apenas ${answeredQuestions} de ${totalQuestions} questões. Para um diagnóstico mais preciso, recomendamos responder ao menos 70% das questões. Deseja continuar mesmo assim?`)) {
                    return;
                }
            }
            
            document.getElementById('questionsSection').classList.add('hidden');
            document.getElementById('progressHeader').classList.add('hidden');
            document.getElementById('dataCaptureSection').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Generate Report
        function generateReport(userData) {
            document.getElementById('dataCaptureSection').classList.add('hidden');
            document.getElementById('reportSection').classList.remove('hidden');
            
            // Calculate scores
            const scores = calculateScores();
            
            // Overall score
            const overallScore = scores.overall.toFixed(1);
            document.getElementById('overallScore').textContent = overallScore;
            document.getElementById('indicatorValue').textContent = overallScore;
            
            // Level text
            let levelText = '';
            if (overallScore <= 1.5) levelText = 'Nível Inicial - Oportunidades significativas de desenvolvimento';
            else if (overallScore <= 2.5) levelText = 'Nível em Desenvolvimento - Progresso visível com gaps importantes';
            else if (overallScore <= 3.5) levelText = 'Nível Consolidado - Boa maturidade com espaço para otimização';
            else levelText = 'Nível Avançado - Excelência em gestão de talentos';
            
            document.getElementById('overallLevel').textContent = levelText;
            
            // Position indicator
            const position = ((overallScore - 1) / 3) * 100;
            document.getElementById('scoreIndicator').style.left = position + '%';
            
            // Render charts and analysis
            renderRadarChart(scores);
            renderDetailedAnalysis(scores);
            renderRecommendations(scores);
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Calculate Scores
        function calculateScores() {
            const scores = {
                overall: 0,
                byBloco: {}
            };
            
            let totalAnswered = 0;
            let totalScore = 0;
            
            blocoKeys.forEach(blocoName => {
                const bloco = assessmentData.blocos[blocoName];
                let blocoScore = 0;
                let blocoCount = 0;
                
                bloco.questions.forEach(question => {
                    if (responses[question.id]) {
                        blocoScore += responses[question.id];
                        blocoCount++;
                        totalScore += responses[question.id];
                        totalAnswered++;
                    }
                });
                
                scores.byBloco[blocoName] = blocoCount > 0 ? blocoScore / blocoCount : 0;
            });
            
            scores.overall = totalAnswered > 0 ? totalScore / totalAnswered : 0;
            
            return scores;
        }

        // Render Radar Chart
        function renderRadarChart(scores) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            const isMobile = window.innerWidth < 640;
            
            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: Object.keys(scores.byBloco),
                    datasets: [{
                        label: 'Maturidade',
                        data: Object.values(scores.byBloco),
                        borderColor: '#011334',
                        backgroundColor: 'rgba(1, 19, 52, 0.1)',
                        pointBackgroundColor: '#E1FF00',
                        pointBorderColor: '#011334',
                        pointBorderWidth: 2,
                        pointRadius: isMobile ? 5 : 8,
                        pointHoverRadius: isMobile ? 7 : 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            min: 0,
                            max: 4,
                            ticks: {
                                stepSize: 1,
                                font: {
                                    size: isMobile ? 10 : 12
                                },
                                display: !isMobile // Hide ticks on mobile for cleaner look
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            pointLabels: {
                                font: {
                                    size: isMobile ? 10 : 12
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            enabled: true,
                            backgroundColor: 'rgba(1, 19, 52, 0.9)',
                            bodyFont: {
                                size: isMobile ? 11 : 13
                            },
                            padding: isMobile ? 8 : 12
                        }
                    }
                }
            });
        }

        // Render Detailed Analysis
        function renderDetailedAnalysis(scores) {
            const container = document.getElementById('detailedAnalysis');
            container.innerHTML = '';
            
            Object.keys(scores.byBloco).forEach((blocoName, index) => {
                const score = scores.byBloco[blocoName];
                
                const blocoDiv = document.createElement('div');
                blocoDiv.className = 'mb-4 sm:mb-6 p-4 sm:p-6 bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl';
                
                let strengthsWeaknesses = analyzeBloco(blocoName, score);
                
                blocoDiv.innerHTML = `
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2">
                        <h4 class="text-base sm:text-lg font-semibold text-peers-blue">${index + 1}. ${blocoName}</h4>
                        <span class="text-xl sm:text-2xl font-bold ${score < 2 ? 'text-red-500' : score < 3 ? 'text-yellow-500' : 'text-green-500'}">
                            ${score.toFixed(1)}
                        </span>
                    </div>
                    <div class="mb-4">
                        <div class="w-full bg-white rounded-full h-3 sm:h-4 shadow-inner">
                            <div class="h-3 sm:h-4 rounded-full ${score < 2 ? 'bg-gradient-to-r from-red-400 to-red-500' : score < 3 ? 'bg-gradient-to-r from-yellow-400 to-yellow-500' : 'bg-gradient-to-r from-green-400 to-green-500'}" 
                                 style="width: ${(score / 4) * 100}%"></div>
                        </div>
                    </div>
                    ${strengthsWeaknesses}
                `;
                
                container.appendChild(blocoDiv);
            });
        }

        // Analyze Bloco
        function analyzeBloco(blocoName, score) {
            let html = '<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mt-3 sm:mt-4">';
            
            if (score < 2) {
                html += `
                    <div class="bg-red-50 p-3 sm:p-4 rounded-lg border border-red-200">
                        <p class="font-semibold text-red-700 mb-1 sm:mb-2 text-sm sm:text-base">⚠️ Atenção Necessária</p>
                        <p class="text-xs sm:text-sm text-red-600">Esta dimensão requer desenvolvimento prioritário</p>
                    </div>
                `;
            } else if (score < 3) {
                html += `
                    <div class="bg-yellow-50 p-3 sm:p-4 rounded-lg border border-yellow-200">
                        <p class="font-semibold text-yellow-700 mb-1 sm:mb-2 text-sm sm:text-base">📈 Em Progresso</p>
                        <p class="text-xs sm:text-sm text-yellow-600">Bom progresso com oportunidades de melhoria</p>
                    </div>
                `;
            } else {
                html += `
                    <div class="bg-green-50 p-3 sm:p-4 rounded-lg border border-green-200">
                        <p class="font-semibold text-green-700 mb-1 sm:mb-2 text-sm sm:text-base">✅ Força</p>
                        <p class="text-xs sm:text-sm text-green-600">Área bem desenvolvida - mantenha e otimize</p>
                    </div>
                `;
            }
            
            html += `
                <div class="bg-white p-3 sm:p-4 rounded-lg border border-gray-200">
                    <p class="font-semibold text-peers-blue mb-1 sm:mb-2 text-sm sm:text-base">💡 Insight</p>
                    <p class="text-xs sm:text-sm text-gray-600">${getInsightForBloco(blocoName, score)}</p>
                </div>
            `;
            
            html += '</div>';
            return html;
        }

        // Get Insight for Bloco
        function getInsightForBloco(blocoName, score) {
            const insights = {
                "Strategy": {
                    low: "Fortaleça a conexão entre estratégia de pessoas e negócio com métricas claras",
                    medium: "Aprimore métricas e comunicação estratégica para maior impacto",
                    high: "Excelente alinhamento estratégico - foque em inovação e práticas emergentes"
                },
                "Shape": {
                    low: "Desenvolva capacidades de workforce planning e mapeamento de competências",
                    medium: "Otimize estrutura organizacional para maior agilidade e colaboração",
                    high: "Estrutura sólida - explore modelos organizacionais emergentes"
                },
                "Shift": {
                    low: "Implemente processos formais de gestão de mudança e cultura",
                    medium: "Fortaleça cultura e comunicação para acelerar transformação",
                    high: "Boa capacidade de transformação - seja referência no mercado"
                },
                "Talent": {
                    low: "Estruture processos básicos de gestão de talentos end-to-end",
                    medium: "Integre e otimize ciclo de vida do talento com tecnologia",
                    high: "Gestão de talentos madura - inove com IA e analytics"
                },
                "Tech & Digital": {
                    low: "Inicie jornada de transformação digital em RH urgentemente",
                    medium: "Integre sistemas e desenvolva capacidade de people analytics",
                    high: "Boa maturidade digital - explore IA generativa e automação"
                },
                "Work Environment": {
                    low: "Desenvolva programas básicos de experiência e bem-estar",
                    medium: "Fortaleça well-being, diversidade e reconhecimento",
                    high: "Ambiente exemplar - compartilhe melhores práticas"
                }
            };
            
            const level = score < 2 ? 'low' : score < 3 ? 'medium' : 'high';
            return insights[blocoName]?.[level] || "Continue desenvolvendo esta área";
        }

        // Render Recommendations
        function renderRecommendations(scores) {
            const container = document.getElementById('recommendationsContainer');
            container.innerHTML = '';
            
            // Priority areas
            const priorities = [];
            Object.entries(scores.byBloco).forEach(([bloco, score]) => {
                if (score < 3) {
                    priorities.push({bloco, score});
                }
            });
            
            priorities.sort((a, b) => a.score - b.score);
            
            // Quick wins
            const quickWinsDiv = document.createElement('div');
            quickWinsDiv.className = 'mb-6';
            quickWinsDiv.innerHTML = `
                <h4 class="text-base sm:text-lg font-semibold text-peers-blue mb-3 sm:mb-4">🚀 Quick Wins (0-3 meses)</h4>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                    ${generateQuickWins(priorities).map(win => `
                        <div class="bg-gradient-to-r from-peers-lime to-[#F0FF4D] bg-opacity-20 p-3 sm:p-4 rounded-xl border border-peers-lime">
                            <p class="font-semibold text-peers-blue mb-1 sm:mb-2 text-sm sm:text-base">${win.title}</p>
                            <p class="text-xs sm:text-sm text-gray-700">${win.description}</p>
                        </div>
                    `).join('')}
                </div>
            `;
            container.appendChild(quickWinsDiv);
            
            // Strategic initiatives
            const strategicDiv = document.createElement('div');
            strategicDiv.innerHTML = `
                <h4 class="text-base sm:text-lg font-semibold text-peers-blue mb-3 sm:mb-4">🎯 Iniciativas Estratégicas (3-12 meses)</h4>
                <div class="space-y-3 sm:space-y-4">
                    ${generateStrategicInitiatives(priorities).map((init, index) => `
                        <div class="bg-white border-l-4 border-peers-blue p-3 sm:p-4 rounded-lg shadow hover:shadow-lg transition-shadow">
                            <div class="flex flex-col">
                                <p class="font-semibold text-peers-blue mb-1 sm:mb-2 text-sm sm:text-base">
                                    ${index + 1}. ${init.title}
                                </p>
                                <p class="text-xs sm:text-sm text-gray-700 mb-2 sm:mb-3">${init.description}</p>
                                <div class="flex gap-2 flex-wrap">
                                    <span class="px-2 sm:px-3 py-1 bg-gradient-to-r from-peers-serene to-peers-serene-02 text-xs rounded-full text-peers-blue font-medium">
                                        ${init.impact}
                                    </span>
                                    <span class="px-2 sm:px-3 py-1 bg-gray-100 text-xs rounded-full text-gray-700">
                                        ${init.effort}
                                    </span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            container.appendChild(strategicDiv);
        }

        // Generate Quick Wins
        function generateQuickWins(priorities) {
            const quickWins = [
                {
                    title: "Pesquisa de Pulso Mensal",
                    description: "Implemente pesquisas rápidas para medir engajamento e identificar gaps"
                },
                {
                    title: "Newsletter de Pessoas",
                    description: "Crie comunicação regular conectando estratégia de pessoas ao negócio"
                },
                {
                    title: "1:1s Estruturadas",
                    description: "Estabeleça rotina de conversas quinzenais entre líderes e liderados"
                },
                {
                    title: "Programa de Kudos",
                    description: "Lance sistema simples de reconhecimento peer-to-peer digital"
                }
            ];
            
            return quickWins.slice(0, Math.min(4, Math.max(2, priorities.length)));
        }

        // Generate Strategic Initiatives
        function generateStrategicInitiatives(priorities) {
            const allInitiatives = {
                "Strategy": {
                    title: "Strategic Workforce Planning",
                    description: "Implemente processo integrado de planejamento estratégico de força de trabalho alinhado aos objetivos de negócio de 3-5 anos",
                    impact: "Alto Impacto",
                    effort: "Esforço Médio"
                },
                "Shape": {
                    title: "Redesenho Organizacional Ágil",
                    description: "Transforme estrutura hierárquica em modelo ágil com squads multifuncionais e autonomia decisória",
                    impact: "Alto Impacto",
                    effort: "Esforço Alto"
                },
                "Talent": {
                    title: "Performance Management 3.0",
                    description: "Migre para modelo de feedback contínuo com OKRs, check-ins mensais e desenvolvimento personalizado",
                    impact: "Alto Impacto",
                    effort: "Esforço Alto"
                },
                "Tech & Digital": {
                    title: "People Analytics Center",
                    description: "Estruture capacidade de analytics com dashboard executivo e insights preditivos para decisões baseadas em dados",
                    impact: "Alto Impacto",
                    effort: "Esforço Médio"
                },
                "Work Environment": {
                    title: "Employee Experience Journey",
                    description: "Mapeie e redesenhe jornada completa do colaborador com momentos que importam e personalização",
                    impact: "Alto Impacto",
                    effort: "Esforço Médio"
                },
                "Shift": {
                    title: "Change Management Office",
                    description: "Crie centro de excelência em mudanças com metodologia própria e rede de agentes de transformação",
                    impact: "Médio Impacto",
                    effort: "Esforço Médio"
                }
            };
            
            const initiatives = [];
            priorities.slice(0, 3).forEach(({bloco}) => {
                if (allInitiatives[bloco]) {
                    initiatives.push(allInitiatives[bloco]);
                }
            });
            
            // Add at least 2 initiatives
            if (initiatives.length < 2) {
                Object.values(allInitiatives).slice(0, 2 - initiatives.length).forEach(init => {
                    if (!initiatives.includes(init)) {
                        initiatives.push(init);
                    }
                });
            }
            
            return initiatives;
        }

        // Download Report
        function downloadReport() {
            // Create a simple CSV with the scores
            const scores = calculateScores();
            let csv = 'Dimensão,Pontuação\n';
            csv += `Overall,${scores.overall.toFixed(2)}\n`;
            
            Object.entries(scores.byBloco).forEach(([bloco, score]) => {
                csv += `${bloco},${score.toFixed(2)}\n`;
            });
            
            // Create download link
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `assessment_talentos_${userData.company || 'resultado'}_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
            
            alert('Dashboard executivo baixado com sucesso! Para análise completa, entre em contato com a PEERS.');
        }

        // Apply WhatsApp Mask
        function applyWhatsappMask(value) {
            value = value.replace(/\D/g, '');
            value = value.replace(/(\d{2})(\d)/, '($1) $2');
            value = value.replace(/(\d{5})(\d)/, '$1-$2');
            return value;
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize
            initializeAssessment();
            
            // Start form
            const startForm = document.getElementById('startForm');
            if (startForm) {
                startForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    startAssessment();
                });
            }
            
            // Data form
            const dataForm = document.getElementById('dataForm');
            if (dataForm) {
                dataForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    userData = {
                        name: document.getElementById('userName').value,
                        position: document.getElementById('userPosition').value,
                        company: document.getElementById('userCompany').value,
                        email: document.getElementById('userEmail').value,
                        whatsapp: document.getElementById('userWhatsapp').value || '',
                        industryType: industryType,
                        companySize: companySize,
                        timestamp: new Date().toISOString(),
                        scores: calculateScores()
                    };
                    
                    // In a real implementation, send data to server here
                    console.log('User Data:', userData);
                    
                    generateReport(userData);
                });
            }
            
            // WhatsApp mask
            const whatsappInput = document.getElementById('userWhatsapp');
            if (whatsappInput) {
                whatsappInput.addEventListener('input', function(e) {
                    e.target.value = applyWhatsappMask(e.target.value);
                });
            }

            // Handle window resize for responsive adjustments
            let resizeTimer;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    // Re-render chart if it exists
                    if (document.getElementById('radarChart') && window.Chart) {
                        const canvas = document.getElementById('radarChart');
                        const chart = Chart.getChart(canvas);
                        if (chart) {
                            chart.resize();
                        }
                    }
                }, 250);
            });

            // Add smooth scroll behavior for mobile
            if ('ontouchstart' in window) {
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>